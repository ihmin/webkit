<script>
var streamPromise = null;
window.internals.withUserGesture(() => {
    streamPromise = navigator.mediaDevices.getUserMedia({ video: true });
});
streamPromise
    .then(() => { window.parent.postMessage('success', '*'); })
    .catch(error => { window.parent.postMessage(`fail (${error})`, '*'); });
</script>
